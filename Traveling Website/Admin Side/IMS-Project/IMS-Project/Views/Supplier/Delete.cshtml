@model IMS_Project.Models.Supplier

@{
    ViewBag.Title = "Supplier";
    ViewBag.SubTitle = "Delete";
}

<h3>Are you sure you want to delete this?</h3>
<hr />
<div class="row">
    <div class="col-md-8">
        <dl class="dl-horizontal ">
            <dt>
                @Html.DisplayNameFor(model => model.SupplierID)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.SupplierID)
            </dd>
            <dt>
                @Html.DisplayNameFor(model => model.CompanyName)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.CompanyName)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.ContactName)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.ContactName)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.ContactTitle)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.ContactTitle)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Mobile)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Mobile)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Phone)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Phone)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Address)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Address)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.City)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.City)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Country)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Country)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Fax)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Fax)
            </dd>
            <dt>
                @Html.DisplayNameFor(model => model.InActive)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.InActive)
            </dd>

        </dl>
    </div>
    <div class="col-md-4">
        <div>
            <img src="~/Content/Images/ProfileImage.svg" alt="" class="img-thumbnail" width="160" height="160" />
        </div>
    </div>
</div>

@using (Html.BeginForm("Delete", "Supplier", new { id = @Model.SupplierID }, FormMethod.Post))
{
    @Html.AntiForgeryToken()

    <div class="form-actions no-color">
        @Html.ActionLink("Back to List", "Index", null, new { @class = "" })
        @*<input type="submit" value="Delete" class="btn btn-danger col-md-offset-1" onclick="deleteSupplier(event)" />*@
        <input type="button" value="Delete" class="btn btn-danger col-md-offset-1" onclick="setInActive(event)" />

    </div>
}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
    function setInActive(event) {
        event.preventDefault(); // Prevent form submission

        try {
            if (confirm('Are you sure you want to set this supplier as InActive?')) {
                // Perform AJAX request or form submission to set the product as InActive
                $.ajax({
                    url: '/Supplier/SetInActive/@Model.SupplierID',
                    type: 'POST',
                    data: {},
                    success: function (response) {
                        // Handle success, e.g., refresh the page or update UI
                        window.location.reload();
                    },
                    error: function (xhr, status, error) {
                        throw new Error(error); // Throw an exception if an error occurs
                    }
                });
            }
        } catch (error) {
            alert('Error: ' + error); // Show error message in an alert box
        }
    }
    function deleteSupplier(event) {
        event.preventDefault(); // Prevent form submission

        try {
            if (confirm('Are you sure you want to delete this?')) {
                // Perform AJAX request or form submission to delete the supplier
                $.ajax({
                    url: '/Supplier/Delete/@Model.SupplierID',
                    type: 'POST',
                    data: {},
                    success: function (response) {
                        // Handle success, e.g., redirect to the list page
                        window.location.href = '/Supplier/Index';
                    },
                    error: function (xhr, status, error) {
                        throw new Error(error); // Throw an exception if an error occurs
                    }
                });
            }
        } catch (error) {
            alert('Error: ' + error); // Show error message in an alert box
        }
    }
</script>
